%li{ :id => "#{node.send(opts[:id])}_#{opts[:klass]}", :'data-id' => node.send(opts[:id]) }
  - title = node.send opts[:title]
  - handle = content_tag :i, '', :class => :handle
  - link = link_to(title, url_for(opts[:namespace] + [node]), :title => title)
  - controls = render(:partial => "#{opts[:path]}/controls", :locals => { :node => node, :opts => opts })
  - controls = content_tag(:b, controls, :class => :controls)
  - element = handle + controls + link
  %div{ :class => "link#{' root' if root}" }
    = element
  = content_tag :ol, raw(children)
